<h1>Компиляция и запуск</h1>

Если потребуется запускать или скомпилировать, то клонировать через goland,сборка производится через консоль по средствам команды go build,но нужно находиться внутри папки проекта где лежит файл main

Файл архива должен находиться в папке проекта,если запускаете код через ide,так же если скомпилировали код,то архив так же должен находиться рядом с этим файлом при запуске, поменять путь можно (zipFile, err := zip.OpenReader("(дописать путь сюда)egrul.json.zip"))

Так как код и и скомпилированный файл тестировался только под linux, под ide(windows) будет на каждый шаг с базой данных запрашивать пароль, это сделано для тестирования и доведения до рабочего состояния.

Порядок действий такой:

- Заходим консоль и выполняем $Env:GOOS = "windows"; $Env:GOARCH = "amd64" или $Env:GOOS = "linux"; $Env:GOARCH = "amd64"
- Компилируем код go build,через консоль находясь в папке проекта с main.go,если выдаст ошибку по модулю какому-либо ,то
- go install github.com/lib/pq и после go mod download github.com/lib/pq
- Копируем скомпилированный файл на Linux к примеру в папку /opt и сюда же архив в zip формате с файлами json- apt install sed jq -y

<code>

      chown -R postgres:postgres /opt
      chmod -R 755 / opt
      su postgres
      cd /opt
      ./upload-json-in-postgresql(ну или как у вас назвался файл после компиляции,который вы скопировали)

</code>

<h1>Описание действий</h1>

Все, далее создастся база, постоянная таблица egrul и для каждого файла будет удаляться и создаваться таблица temp из которой будут поступать данные в таблицу egrul,jq перестроит json из построчного раздела,в однострочный для каждой глобального типа {данные} После sed произведет парсинг на наличие в файле лишних символов /t ,/n ,/косых черт/ ,пробелов вложенных двойных кавычек оставив по одной двойной в начала и конце "данных"

В среднем 200гб json или 11.5млн записей(особо не зависимо от количества забираемых данных для столбцов) занимает от 6-10 часов Делается все в один поток, чтобы избежать ошибок